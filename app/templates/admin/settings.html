{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
    <h2 class="mb-4">إعدادات الموقع</h2>
    <form method="POST">
        <div class="mb-3">
            <label class="form-label">اسم المعهد</label>
            <input type="text" class="form-control" name="institute_name" value="{{ settings.institute_name }}">
        </div>
        <div class="mb-3">
            <label class="form-label">عنوان القسم التعريفي</label>
            <input type="text" class="form-control" name="about_title" value="{{ settings.about_title or '' }}">
        </div>
        <div class="mb-3">
            <label class="form-label">محتوى القسم التعريفي</label>
            <textarea class="form-control" name="about_content" rows="3">{{ settings.about_content or '' }}</textarea>
        </div>
        <div class="mb-3">
            <label class="form-label">رسالة المعهد</label>
            <textarea class="form-control" name="mission_statement" rows="2">{{ settings.mission_statement or '' }}</textarea>
        </div>
        <div class="mb-3">
            <label class="form-label">الهاتف 1</label>
            <input type="text" class="form-control" name="phone1" value="{{ settings.phone1 or '' }}">
        </div>
        <div class="mb-3">
            <label class="form-label">البريد الإلكتروني</label>
            <input type="email" class="form-control" name="email" value="{{ settings.email or '' }}">
        </div>
        <div class="mb-3">
            <label class="form-label">رابط الفيسبوك</label>
            <input type="url" class="form-control" name="facebook_url" value="{{ settings.facebook_url or '' }}">
        </div>
        
        <hr class="my-4">
        <h4 class="mb-3">
            <i class="fab fa-telegram ms-2"></i>
            إعدادات النسخ الاحتياطي التلقائي عبر تيليجرام
        </h4>
        <div class="alert alert-info">
            <i class="fas fa-info-circle ms-2"></i>
            <strong>النسخ الاحتياطي التلقائي الذكي:</strong> عند تفعيل هذه الميزة، سيتم إنشاء نسخة احتياطية شاملة وإرسالها تلقائياً إلى تيليجرام عند حدوث أي تغيير على البيانات الهامة (إضافة، تعديل، أو حذف).
        </div>
        
        <div class="card mb-3 border-primary">
            <div class="card-header bg-primary text-white">
                <h6 class="mb-0">
                    <i class="fas fa-shield-alt ms-2"></i>
                    الجداول المحمية بالنسخ الاحتياطي التلقائي
                </h6>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <ul class="list-unstyled mb-0">
                            <li><i class="fas fa-check-circle text-success ms-2"></i> المستخدمين والطلاب والمعلمين</li>
                            <li><i class="fas fa-check-circle text-success ms-2"></i> الدورات والتسجيلات والدروس</li>
                            <li><i class="fas fa-check-circle text-success ms-2"></i> العلامات والشهادات</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <ul class="list-unstyled mb-0">
                            <li><i class="fas fa-check-circle text-success ms-2"></i> الأخبار والشهادات</li>
                            <li><i class="fas fa-check-circle text-success ms-2"></i> رسائل الاتصال</li>
                            <li><i class="fas fa-check-circle text-success ms-2"></i> إعدادات الموقع</li>
                        </ul>
                    </div>
                </div>
                <div class="alert alert-warning mt-3 mb-0">
                    <i class="fas fa-exclamation-triangle ms-2"></i>
                    <strong>ملاحظة:</strong> النسخة الاحتياطية تُرسل إلى تيليجرام فقط ولا تُحفظ محلياً على السيرفر لتوفير المساحة.
                </div>
            </div>
        </div>
        
        <div class="mb-3">
            <label class="form-label">
                <i class="fab fa-telegram ms-2"></i>
                Telegram Bot Token
            </label>
            <input type="text" class="form-control" name="telegram_bot_token" value="{{ settings.telegram_bot_token or '' }}" placeholder="123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11">
            <small class="text-muted">احصل على Token من @BotFather على تيليجرام</small>
        </div>
        
        <div class="mb-3">
            <label class="form-label">
                <i class="fas fa-user ms-2"></i>
                Telegram Chat ID
            </label>
            <input type="text" class="form-control" name="telegram_chat_id" value="{{ settings.telegram_chat_id or '' }}" placeholder="123456789">
            <small class="text-muted">احصل على Chat ID من @userinfobot على تيليجرام</small>
        </div>
        
        <div class="mb-3">
            <div class="form-check form-switch">
                <input type="checkbox" class="form-check-input" id="telegram_backup_enabled" name="telegram_backup_enabled" {{ 'checked' if settings.telegram_backup_enabled else '' }} style="font-size: 1.2em;">
                <label class="form-check-label" for="telegram_backup_enabled">
                    <strong>
                        <i class="fas fa-cloud-upload-alt ms-2"></i>
                        تفعيل النسخ الاحتياطي التلقائي إلى تيليجرام
                    </strong>
                </label>
            </div>
            <small class="text-muted">عند التفعيل، سيتم إرسال نسخة احتياطية شاملة تلقائياً عند أي تعديل على البيانات الهامة</small>
        </div>
        
        <hr class="my-4">
        <h4 class="mb-3">
            <i class="fas fa-sliders-h ms-2"></i>
            إعدادات السلايدرات (الصفحة الرئيسية)
        </h4>
        <div class="alert alert-info">
            <i class="fas fa-info-circle ms-2"></i>
            تحكم في طريقة عرض السلايدرات في الصفحة الرئيسية للموقع
        </div>
        
        <div class="card mb-3">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0"><i class="fas fa-book ms-2"></i> سلايدر الدورات</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label class="form-label">
                            <i class="fas fa-list-ol ms-2"></i>
                            عدد الدورات في كل شريحة
                        </label>
                        <select class="form-select" name="courses_slider_items">
                            <option value="1" {{ 'selected' if settings.courses_slider_items == 1 else '' }}>دورة واحدة</option>
                            <option value="2" {{ 'selected' if settings.courses_slider_items == 2 else '' }}>دورتان</option>
                            <option value="3" {{ 'selected' if settings.courses_slider_items == 3 else '' }}>3 دورات</option>
                            <option value="4" {{ 'selected' if settings.courses_slider_items == 4 else '' }}>4 دورات</option>
                        </select>
                        <small class="text-muted">عدد الدورات المعروضة في كل شريحة من السلايدر</small>
                    </div>
                    
                    <div class="col-md-6 mb-3">
                        <label class="form-label">
                            <i class="fas fa-clock ms-2"></i>
                            سرعة الانتقال (بالميلي ثانية)
                        </label>
                        <input type="number" class="form-control" name="courses_slider_interval" value="{{ settings.courses_slider_interval or 5000 }}" min="1000" max="30000" step="500">
                        <small class="text-muted">الوقت بين كل انتقال (5000 = 5 ثوانٍ)</small>
                    </div>
                    
                    <div class="col-md-6 mb-3">
                        <label class="form-label">
                            <i class="fas fa-exchange-alt ms-2"></i>
                            نوع المؤثر
                        </label>
                        <select class="form-select" name="courses_slider_transition">
                            <option value="slide" {{ 'selected' if settings.courses_slider_transition == 'slide' else '' }}>انزلاق (Slide)</option>
                            <option value="fade" {{ 'selected' if settings.courses_slider_transition == 'fade' else '' }}>تلاشي (Fade)</option>
                        </select>
                        <small class="text-muted">طريقة الانتقال بين الشرائح</small>
                    </div>
                    
                    <div class="col-md-6 mb-3">
                        <div class="form-check mt-4">
                            <input type="checkbox" class="form-check-input" id="courses_slider_auto_play" name="courses_slider_auto_play" {{ 'checked' if settings.courses_slider_auto_play else '' }}>
                            <label class="form-check-label" for="courses_slider_auto_play">
                                <i class="fas fa-play-circle ms-2"></i>
                                التشغيل التلقائي
                            </label>
                        </div>
                        <small class="text-muted d-block mt-1">الانتقال التلقائي بين الشرائح</small>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card mb-3">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0"><i class="fas fa-chalkboard-teacher ms-2"></i> سلايدر المدرسين</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label class="form-label">
                            <i class="fas fa-list-ol ms-2"></i>
                            عدد المدرسين في كل شريحة
                        </label>
                        <select class="form-select" name="teachers_slider_items">
                            <option value="2" {{ 'selected' if settings.teachers_slider_items == 2 else '' }}>مدرسان</option>
                            <option value="3" {{ 'selected' if settings.teachers_slider_items == 3 else '' }}>3 مدرسين</option>
                            <option value="4" {{ 'selected' if settings.teachers_slider_items == 4 else '' }}>4 مدرسين</option>
                            <option value="5" {{ 'selected' if settings.teachers_slider_items == 5 else '' }}>5 مدرسين</option>
                        </select>
                        <small class="text-muted">عدد المدرسين المعروضين في كل شريحة</small>
                    </div>
                    
                    <div class="col-md-6 mb-3">
                        <label class="form-label">
                            <i class="fas fa-clock ms-2"></i>
                            سرعة الانتقال (بالميلي ثانية)
                        </label>
                        <input type="number" class="form-control" name="teachers_slider_interval" value="{{ settings.teachers_slider_interval or 5000 }}" min="1000" max="30000" step="500">
                        <small class="text-muted">الوقت بين كل انتقال (5000 = 5 ثوانٍ)</small>
                    </div>
                    
                    <div class="col-md-6 mb-3">
                        <label class="form-label">
                            <i class="fas fa-exchange-alt ms-2"></i>
                            نوع المؤثر
                        </label>
                        <select class="form-select" name="teachers_slider_transition">
                            <option value="slide" {{ 'selected' if settings.teachers_slider_transition == 'slide' else '' }}>انزلاق (Slide)</option>
                            <option value="fade" {{ 'selected' if settings.teachers_slider_transition == 'fade' else '' }}>تلاشي (Fade)</option>
                        </select>
                        <small class="text-muted">طريقة الانتقال بين الشرائح</small>
                    </div>
                    
                    <div class="col-md-6 mb-3">
                        <div class="form-check mt-4">
                            <input type="checkbox" class="form-check-input" id="teachers_slider_auto_play" name="teachers_slider_auto_play" {{ 'checked' if settings.teachers_slider_auto_play else '' }}>
                            <label class="form-check-label" for="teachers_slider_auto_play">
                                <i class="fas fa-play-circle ms-2"></i>
                                التشغيل التلقائي
                            </label>
                        </div>
                        <small class="text-muted d-block mt-1">الانتقال التلقائي بين الشرائح</small>
                    </div>
                </div>
            </div>
        </div>
        
        <button type="submit" class="btn btn-primary btn-lg">
            <i class="fas fa-save ms-2"></i>
            حفظ جميع التغييرات
        </button>
    </form>
</div>
{% endblock %}
