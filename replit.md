# تطبيق معهد القاسم للعلوم واللغات

## نظرة عامة
تطبيق ويب متكامل لإدارة معهد تعليمي باللغة العربية، مبني باستخدام Flask وPython، مع قاعدة بيانات SQLite.

## المميزات الرئيسية

### 1. نظام المصادقة والصلاحيات
- أربعة أنواع من المستخدمين:
  - **المدير**: صلاحيات كاملة على النظام
  - **معاون المدير**: صلاحيات قابلة للتخصيص
  - **الأساتذة**: رفع دروس PDF، إضافة علامات، ملاحظات
  - **الطلاب**: عرض الدروس، العلامات، الملاحظات

### 2. لوحة التحكم الإدارية
- إدارة المستخدمين (إضافة، تعديل، حذف)
- إدارة الدورات التعليمية
- إدارة الأخبار
- إعدادات الموقع الشاملة
- نظام النسخ الاحتياطي المتقدم

### 3. نظام النسخ الاحتياطي
- **نسخ احتياطي كامل**: قاعدة البيانات + الملفات
- **نسخ احتياطي للبنية**: القوالب + CSS + JS
- **نسخ احتياطي للبيانات**: قاعدة البيانات فقط
- إرسال تلقائي إلى Telegram (اختياري)

### 4. الصفحة الرئيسية للزوار
- قسم تعريفي بالمعهد
- عرض الدورات المميزة
- معلومات عن المدرسين
- آخر الأخبار
- آراء الطلاب وشهادات
- معلومات التواصل

### 5. لوحات التحكم المخصصة
- **لوحة الأساتذة**: إدارة الدروس، الطلاب، العلامات
- **لوحة الطلاب**: عرض الدورات، تحميل الدروس، العلامات

## البنية التقنية

### التقنيات المستخدمة
- **Backend**: Flask (Python 3.11)
- **قاعدة البيانات**: SQLite
- **Frontend**: Bootstrap 5, Font Awesome
- **المصادقة**: Flask-Login
- **النماذج**: Flask-WTF
- **التكامل**: Telegram Bot API

### هيكل المشروع
```
معهد-القاسم/
├── app/
│   ├── models/          # نماذج قاعدة البيانات
│   ├── routes/          # المسارات (auth, admin, teacher, student, public)
│   ├── templates/       # القوالب HTML
│   ├── static/          # الملفات الثابتة (CSS, JS, uploads)
│   └── utils/           # أدوات مساعدة (backup, decorators)
├── backups/             # مجلد النسخ الاحتياطية
├── config.py            # الإعدادات
├── main.py              # نقطة البداية
└── alqasim_institute.db # قاعدة البيانات
```

## التثبيت والتشغيل

### بيانات الدخول الافتراضية
- **البريد الإلكتروني**: admin@alqasim.edu
- **كلمة المرور**: admin123

⚠️ **تحذير أمني**: يجب تغيير كلمة المرور الافتراضية فوراً بعد أول تسجيل دخول من خلال:
1. تسجيل الدخول باستخدام البيانات أعلاه
2. الانتقال إلى: لوحة التحكم > إدارة المستخدمين
3. تعديل المستخدم الإداري وتغيير كلمة المرور

### تشغيل التطبيق
التطبيق يعمل تلقائياً على المنفذ 5000

## إعدادات Telegram (اختيارية)

لتفعيل إرسال النسخ الاحتياطية إلى Telegram:

1. إنشاء بوت عبر [@BotFather](https://t.me/BotFather)
2. الحصول على Bot Token
3. الحصول على Chat ID
4. إضافة المتغيرات التالية في Secrets:
   - `TELEGRAM_BOT_TOKEN`
   - `TELEGRAM_CHAT_ID`
   - `TELEGRAM_BACKUP_ENABLED=true`

## قاعدة البيانات

### الجداول الرئيسية
- `users` - المستخدمون
- `students` - الطلاب
- `teachers` - المدرسون
- `courses` - الدورات
- `enrollments` - التسجيلات
- `lessons` - الدروس
- `grades` - العلامات
- `news` - الأخبار
- `testimonials` - آراء الطلاب
- `certificates` - الشهادات
- `contacts` - رسائل التواصل
- `site_settings` - إعدادات الموقع

## الواجهات المتاحة

### للزوار
- `/` - الصفحة الرئيسية
- `/courses` - الدورات
- `/teachers` - المدرسون
- `/news` - الأخبار
- `/contact` - اتصل بنا
- `/auth/login` - تسجيل الدخول

### للإدارة
- `/admin/dashboard` - لوحة التحكم
- `/admin/users` - إدارة المستخدمين
- `/admin/courses` - إدارة الدورات
- `/admin/news` - إدارة الأخبار
- `/admin/settings` - الإعدادات
- `/admin/backup` - النسخ الاحتياطي

### للأساتذة
- `/teacher/dashboard` - لوحة المدرس
- `/teacher/lessons` - دروسي
- `/teacher/add_lesson` - إضافة درس
- `/teacher/students` - طلابي

### للطلاب
- `/student/dashboard` - لوحة الطالب
- `/student/courses` - دوراتي
- `/student/grades` - علاماتي

## الأمان
- تشفير كلمات المرور باستخدام Werkzeug
- نظام صلاحيات متقدم
- حماية CSRF في النماذج
- تحكم في أنواع الملفات المرفوعة
- حد أقصى لحجم الملفات (16 MB)

## التطوير المستقبلي
- إضافة نظام الإشعارات
- تقارير متقدمة وإحصائيات
- نظام الدفع الإلكتروني
- تطبيق الجوال
- نظام الحضور والغياب
- منتدى للطلاب

## الإصلاحات الأخيرة

### 21 أكتوبر 2024
- ✅ إصلاح مشكلة "الملف الشخصي للمعلم غير موجود"
- ✅ إصلاح نظام النسخ الاحتياطي للبنية (schema export)
- ✅ إزالة كلمة المرور من السجلات لتحسين الأمان
- ✅ إضافة إنشاء تلقائي للملفات الشخصية للمعلمين والطلاب عند إضافة مستخدمين جدد

## ملاحظات مهمة

### إضافة مستخدمين جدد
- عند إضافة مستخدم من نوع "معلم"، يتم إنشاء ملف شخصي له تلقائياً في جدول المعلمين
- عند إضافة مستخدم من نوع "طالب"، يتم إنشاء ملف شخصي له تلقائياً في جدول الطلاب
- يمكن تحديث معلومات الملف الشخصي لاحقاً

### تغيير نوع المستخدم
- ⚠️ تغيير نوع المستخدم من "معلم" إلى نوع آخر سيحذف ملفه الشخصي والبيانات المرتبطة به
- تأكد من نقل أو حفظ أي بيانات مهمة قبل تغيير نوع المستخدم

## الدعم
للمساعدة أو الاستفسارات، يرجى التواصل مع المطور أو فريق الدعم.

---
**تم التطوير بواسطة**: Replit Agent
**التاريخ**: 2024
**الإصدار**: 1.0.1
